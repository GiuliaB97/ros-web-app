<html>

	<head>
	<script type="text/javascript" src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js">
		</script>
	</head>

	<body>
	    	<h1>Hello from ROS!</h1>

	    	<p>Communicate to robots from my 1st webpage</p>

	    	<script type="text/javascript">
			var ros = new ROSLIB.Ros({url : 'ws://localhost:9090/'});
			ros.on('connection', function() { console.log('Connected to websocket server.');});

			ros.on('error', function(error) { console.log('Error connecting to websocket server: ', error);});

			ros.on('close', function() { console.log('Connection to websocket server closed.');});
	    		var cmdVel = new ROSLIB.Topic({
			    ros : ros,
			    name : 'turtle1/cmd_vel',
			    messageType : 'geometry_msgs/Twist'
			});
//for turtlebot and LeoRover NB in for turtlebot
var cmdVel2 = new ROSLIB.Topic({
			    ros : ros,
			    name : '/cmd_vel',
			    messageType : 'geometry_msgs/Twist'
			});

	document.onkeydown = checkKey;

	function checkKey(e) {

	    e = e || window.event;

	    if (e.keyCode == '38') {
		// up arrow
		var twist = new ROSLIB.Message({
					    linear : {
						x : 2.0,
						y : 0.0,
						z : 0.0
					    },
					    angular : {
						x : 0.0,
						y : 0.0,
						z : 0.0
					    }
		});
	    }
	    else if (e.keyCode == '40') {
// down arrow
		var twist = new ROSLIB.Message({
				    linear : {
					x : -2.0,
					y : 0.0,
					z : 0.0
				    },
				    angular : {
					x : 0.0,
					y : 0.0,
					z : 0.0
				    }
		});
	    }
	    else if (e.keyCode == '37') {
	       // left arrow

		var twist = new ROSLIB.Message({
				    linear : {
					x : 0.0,
					y : -1.0,
					z : 0.0
				    },
				    angular : {
					x : 0.0,
					y : 0.0,
					z : 2.0
				    }
		});
	    }
	    else if (e.keyCode == '39') {
	       // right 
		var twist = new ROSLIB.Message({
				    linear : {
					x : 0.0,
					y : 0.0,
					z : 0.0
				    },
				    angular : {
					x : 0.0,
					y : 0.0,
					z : -2.0
				    }
				});
	    	}
	cmdVel.publish(twist);
cmdVel2.publish(twist);
	}
			
		</script>
	</body>
</html>
